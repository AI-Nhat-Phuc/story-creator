# Story Creator

Dá»± Ã¡n táº¡o tháº¿ giá»›i vÃ  cÃ¢u chuyá»‡n báº±ng Python vá»›i giao diá»‡n trá»±c quan, database NoSQL, vÃ  tÃ­ch há»£p GPT-5 Mini cho mÃ´ phá»ng nhÃ¢n váº­t.

## TÃ­nh nÄƒng

### Core Features
- âœ¨ Táº¡o tháº¿ giá»›i (worlds) theo cÃ¡c thá»ƒ loáº¡i: Fantasy, Sci-Fi, Modern, Historical
- ğŸ“– Táº¡o cÃ¢u chuyá»‡n (stories) vá»›i nhiá»u thá»ƒ loáº¡i khÃ¡c nhau
- ğŸ“ Quáº£n lÃ½ Ä‘á»‹a Ä‘iá»ƒm (locations) trong tháº¿ giá»›i
- ğŸ‘¥ Quáº£n lÃ½ thá»±c thá»ƒ (entities) tham gia vÃ o cÃ¢u chuyá»‡n
- â° Quáº£n lÃ½ thá»i gian theo nÃ³n Ã¡nh sÃ¡ng (time cones)
- ğŸ”— LiÃªn káº¿t cÃ¡c cÃ¢u chuyá»‡n vá»›i nhau theo thá»±c thá»ƒ, Ä‘á»‹a Ä‘iá»ƒm, vÃ  thá»i gian
- ğŸ’¾ LÆ°u trá»¯ dá»¯ liá»‡u: **NoSQL Database (TinyDB)** hoáº·c JSON files
- âš¡ **Hiá»‡u suáº¥t cao** vá»›i NoSQL database (máº·c Ä‘á»‹nh)

### â­ NEW: Auto-Generate World from Story Genre
- ğŸŒ **Tá»± Ä‘á»™ng táº¡o tháº¿ giá»›i** khi chá»n thá»ƒ loáº¡i cÃ¢u chuyá»‡n
- ğŸ² **Cáº¥u hÃ¬nh ngáº«u nhiÃªn** cÃ³ thá»ƒ chá»‰nh sá»­a:
  - Sá»‘ lÆ°á»£ng ngÆ°á»i (3-15, ngáº«u nhiÃªn)
  - CÃ³ rá»«ng hay khÃ´ng (ngáº«u nhiÃªn 70% cÃ³)
  - Sá»‘ lÆ°á»£ng sÃ´ng (0-5, ngáº«u nhiÃªn)
  - Sá»‘ lÆ°á»£ng há»“ (0-3, ngáº«u nhiÃªn)
  - Má»©c Ä‘á»™ nguy hiá»ƒm cá»§a sÃ´ng/rá»«ng/há»“ (0-10, ngáº«u nhiÃªn)
- ğŸ‘¹ **Sinh váº­t nguy hiá»ƒm** tá»± Ä‘á»™ng táº¡o dá»±a trÃªn má»©c Ä‘á»™ nguy hiá»ƒm
  - CÃ ng nguy hiá»ƒm â†’ cÃ ng nhiá»u sinh váº­t nguy hiá»ƒm
  - Má»—i 3 Ä‘iá»ƒm danger = 1 sinh váº­t
  - Thuá»™c tÃ­nh Ä‘á»™ng dá»±a trÃªn má»©c Ä‘á»™ nguy hiá»ƒm
- ğŸ¯ **Genre-based World Type Mapping**:
  - Adventure â†’ Fantasy World
  - Mystery â†’ Modern World
  - Conflict â†’ Historical World
  - Discovery â†’ Sci-Fi World

### ğŸ® GPT-5 Mini Interactive Simulation Mode
- ğŸ¤– **TÃ­ch há»£p GPT-5 Mini** (Upgraded from GPT-4o) Ä‘á»ƒ tá»± Ä‘á»™ng dá»‹ch thuáº­t ENGâ†’VN
- ğŸ’¾ LÆ°u káº¿t quáº£ dá»‹ch thuáº­t vÃ o database vÃ  Ã¡nh xáº¡ vÃ o cÃ¢u chuyá»‡n
- ğŸ‘¤ **Giáº£ láº­p lÃ  nhÃ¢n váº­t** trong cÃ¢u chuyá»‡n
- ğŸ“š Äá»c cÃ¢u chuyá»‡n cá»§a nhÃ¢n váº­t má»™t cÃ¡ch liÃªn máº¡ch theo thá»© tá»± thá»i gian nÃ³n Ã¡nh sÃ¡ng
- âš”ï¸ Lá»±a chá»n hÃ nh Ä‘á»™ng cá»§a nhÃ¢n váº­t táº¡i cÃ¡c thá»i Ä‘iá»ƒm trong nÃ³n Ã¡nh sÃ¡ng
  - 3 lá»±a chá»n: 2 Ä‘á»‘i nghá»‹ch + 1 tá»« bá»
- ğŸ¤– NhÃ¢n váº­t khÃ´ng Ä‘Æ°á»£c giáº£ láº­p sáº½ Ä‘Æ°á»£c GPT-5 Mini lá»±a chá»n tá»± Ä‘á»™ng
- â±ï¸ Má»—i nhÃ¢n váº­t cÃ³ tiáº¿n trÃ¬nh xá»­ lÃ½ riÃªng vÃ  chung 1 dÃ²ng thá»i gian
- ğŸ”® Dá»± Ä‘oÃ¡n tÃ¬nh huá»‘ng xáº£y ra tá»« cÃ¢u chuyá»‡n vÃ  sá»± liÃªn káº¿t cá»§a cÃ¡c nhÃ¢n váº­t
- âš¡ **Hiá»‡u suáº¥t tá»‘i Æ°u**: Model má»›i nháº¥t vá»›i cháº¥t lÆ°á»£ng cao vÃ  chi phÃ­ tháº¥p

### User Interfaces
- ğŸ–¥ï¸ Giao diá»‡n Terminal (TUI) trá»±c quan
- ğŸ¨ Giao diá»‡n Ä‘á»“ há»a (GUI) vá»›i tkinter
- ğŸ® **Giao diá»‡n Simulation (Interactive Character Mode)**

## CÃ i Ä‘áº·t

```bash
# Clone repository
git clone https://github.com/AI-Nhat-Phuc/story-creator.git
cd story-creator

# CÃ i Ä‘áº·t dependencies
pip install -r requirements.txt

# (Optional) Set OpenAI API key for GPT-5 Mini features
export OPENAI_API_KEY='your-api-key-here'
```

## Sá»­ dá»¥ng

### Giao diá»‡n Terminal vá»›i NoSQL (Khuyáº¿n nghá»‹ - Hiá»‡u suáº¥t cao)

```bash
python main.py -i terminal -s nosql
# hoáº·c Ä‘Æ¡n giáº£n (NoSQL lÃ  máº·c Ä‘á»‹nh)
python main.py
```

### ğŸ® Cháº¿ Ä‘á»™ Simulation (GPT-5 Mini Interactive)

```bash
# Requires OPENAI_API_KEY environment variable
python main.py -i simulation

# Or run the demo
python demo_gpt_simulation.py
```

### â­ Demo: Auto-Generate World from Story Genre

```bash
# Run the auto-generation demo
python demo_auto_world.py

# This will demonstrate:
# - Creating worlds automatically for each genre
# - Random configuration generation
# - Customizing world configuration
# - Dangerous creatures based on danger levels
```

### Giao diá»‡n GUI vá»›i NoSQL

```bash
python main.py -i gui -s nosql
```

### Sá»­ dá»¥ng JSON files (legacy)

```bash
python main.py -i terminal -s json -d data/
python main.py -i gui -s json -d data/
```

### Chá»‰ Ä‘á»‹nh database file

```bash
python main.py -s nosql --db-path my_stories.db
```

## Cáº¥u trÃºc dá»± Ã¡n

```
story-creator/
â”œâ”€â”€ models/              # Data models (World, Story, Location, Entity, TimeCone)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ world.py
â”‚   â”œâ”€â”€ story.py
â”‚   â”œâ”€â”€ location.py
â”‚   â”œâ”€â”€ entity.py
â”‚   â””â”€â”€ time_cone.py
â”œâ”€â”€ generators/          # Generators for worlds and stories
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ world_generator.py
â”‚   â”œâ”€â”€ story_generator.py
â”‚   â””â”€â”€ story_linker.py
â”œâ”€â”€ utils/              # Utilities (Storage, etc.)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ storage.py
â”œâ”€â”€ interfaces/         # User interfaces
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ terminal_interface.py
â”‚   â””â”€â”€ gui_interface.py
â”œâ”€â”€ data/               # Data storage (auto-created)
â”‚   â”œâ”€â”€ worlds/
â”‚   â”œâ”€â”€ stories/
â”‚   â”œâ”€â”€ locations/
â”‚   â”œâ”€â”€ entities/
â”‚   â””â”€â”€ time_cones/
â”œâ”€â”€ main.py            # Main entry point
â””â”€â”€ README.md
```

## Cáº¥u trÃºc dá»¯ liá»‡u JSON

### World (Tháº¿ giá»›i)

```json
{
  "type": "world",
  "world_id": "uuid",
  "name": "TÃªn tháº¿ giá»›i",
  "description": "MÃ´ táº£ tháº¿ giá»›i",
  "created_at": "timestamp",
  "metadata": {
    "world_type": "fantasy",
    "themes": ["magic", "dragons"]
  },
  "stories": ["story_id_1", "story_id_2"],
  "locations": ["location_id_1", "location_id_2"],
  "entities": ["entity_id_1", "entity_id_2"]
}
```

### Story (CÃ¢u chuyá»‡n)

```json
{
  "type": "story",
  "story_id": "uuid",
  "title": "TiÃªu Ä‘á» cÃ¢u chuyá»‡n",
  "content": "Ná»™i dung cÃ¢u chuyá»‡n",
  "world_id": "world_id",
  "created_at": "timestamp",
  "metadata": {
    "genre": "adventure"
  },
  "locations": ["location_id_1"],
  "entities": ["entity_id_1"],
  "time_cones": ["time_cone_id_1"],
  "linked_stories": ["story_id_2", "story_id_3"]
}
```

### Location (Äá»‹a Ä‘iá»ƒm)

```json
{
  "type": "location",
  "location_id": "uuid",
  "name": "TÃªn Ä‘á»‹a Ä‘iá»ƒm",
  "description": "MÃ´ táº£ Ä‘á»‹a Ä‘iá»ƒm",
  "world_id": "world_id",
  "created_at": "timestamp",
  "coordinates": {
    "x": 100.5,
    "y": 200.3,
    "z": 50.0
  },
  "metadata": {}
}
```

### Entity (Thá»±c thá»ƒ)

```json
{
  "type": "entity",
  "entity_id": "uuid",
  "name": "TÃªn thá»±c thá»ƒ",
  "entity_type": "character",
  "description": "MÃ´ táº£ thá»±c thá»ƒ",
  "world_id": "world_id",
  "created_at": "timestamp",
  "attributes": {
    "strength": 8,
    "intelligence": 9
  },
  "relationships": [
    {
      "entity_id": "other_entity_id",
      "relationship_type": "friend"
    }
  ],
  "metadata": {}
}
```

### Time Cone (NÃ³n Ã¡nh sÃ¡ng thá»i gian)

```json
{
  "type": "time_cone",
  "time_cone_id": "uuid",
  "name": "TÃªn time cone",
  "description": "MÃ´ táº£ ngá»¯ cáº£nh thá»i gian",
  "world_id": "world_id",
  "created_at": "timestamp",
  "start_time": "Thá»i Ä‘iá»ƒm báº¯t Ä‘áº§u",
  "end_time": "Thá»i Ä‘iá»ƒm káº¿t thÃºc",
  "reference_event": "Sá»± kiá»‡n tham chiáº¿u",
  "metadata": {}
}
```

## VÃ­ dá»¥ sá»­ dá»¥ng

### 1. Táº¡o tháº¿ giá»›i Fantasy

```
Chá»n loáº¡i tháº¿ giá»›i: Fantasy
MÃ´ táº£: Má»™t tháº¿ giá»›i ma thuáº­t vá»›i cÃ¡c vÆ°Æ¡ng quá»‘c vÃ  rá»“ng
Sá»‘ Ä‘á»‹a Ä‘iá»ƒm: 5
Sá»‘ thá»±c thá»ƒ: 3
```

### 2. Táº¡o cÃ¢u chuyá»‡n

```
Chá»n thá»ƒ loáº¡i: Adventure
MÃ´ táº£: Má»™t hiá»‡p sÄ© tráº» báº¯t Ä‘áº§u cuá»™c hÃ nh trÃ¬nh tÃ¬m kiáº¿m thanh kiáº¿m huyá»n thoáº¡i
```

### 3. LiÃªn káº¿t cÃ¢u chuyá»‡n

```
PhÆ°Æ¡ng thá»©c: Theo thá»±c thá»ƒ chung
Káº¿t quáº£: CÃ¡c cÃ¢u chuyá»‡n cÃ³ cÃ¹ng nhÃ¢n váº­t sáº½ Ä‘Æ°á»£c liÃªn káº¿t vá»›i nhau
```

## Thuáº­t toÃ¡n liÃªn káº¿t cÃ¢u chuyá»‡n

Há»‡ thá»‘ng sá»­ dá»¥ng cÃ¡c thuáº­t toÃ¡n logic Ä‘á»ƒ liÃªn káº¿t cÃ¡c cÃ¢u chuyá»‡n:

1. **LiÃªn káº¿t theo thá»±c thá»ƒ**: CÃ¢u chuyá»‡n cÃ³ chung nhÃ¢n váº­t/Ä‘á»‘i tÆ°á»£ng
2. **LiÃªn káº¿t theo Ä‘á»‹a Ä‘iá»ƒm**: CÃ¢u chuyá»‡n diá»…n ra á»Ÿ cÃ¹ng vá»‹ trÃ­
3. **LiÃªn káº¿t theo thá»i gian**: CÃ¢u chuyá»‡n cÃ³ cÃ¹ng ngá»¯ cáº£nh thá»i gian (time cone)

## NoSQL Database vs JSON Files

### âš¡ NoSQL Database (TinyDB) - Máº·c Ä‘á»‹nh

**Æ¯u Ä‘iá»ƒm:**
- Truy váº¥n nhanh hÆ¡n vá»›i indexing
- Lá»c vÃ  tÃ¬m kiáº¿m hiá»‡u quáº£
- Má»™t file database duy nháº¥t (dá»… backup)
- Há»— trá»£ ACID transactions
- Tá»‘t hÆ¡n cho datasets lá»›n
- Há»— trá»£ concurrent access

**Performance:**
- Query speed: ~0.0008s cho filtered queries
- Write speed: ~0.07s cho 100 records
- Load speed: ~0.003s cho 10 records

### ğŸ“„ JSON Files - Legacy

**Æ¯u Ä‘iá»ƒm:**
- Dá»… Ä‘á»c vÃ  chá»‰nh sá»­a thá»§ cÃ´ng
- KhÃ´ng cáº§n dependencies
- PhÃ¢n tÃ¡n theo thÆ° má»¥c
- Human-readable format

**Sá»­ dá»¥ng khi:**
- Cáº§n xem/sá»­a dá»¯ liá»‡u trá»±c tiáº¿p
- Dataset nhá» (<100 records)
- KhÃ´ng quan tÃ¢m performance

## ğŸ® GPT-4 Simulation Mode Features

### Interactive Character Simulation

Cháº¿ Ä‘á»™ simulation cho phÃ©p báº¡n:

1. **Tá»± Ä‘á»™ng dá»‹ch thuáº­t (ENGâ†’VN)**
   - GPT-4 tá»± Ä‘á»™ng dá»‹ch táº¥t cáº£ vÄƒn báº£n tá»« Tiáº¿ng Anh sang Tiáº¿ng Viá»‡t
   - Káº¿t quáº£ dá»‹ch Ä‘Æ°á»£c lÆ°u vÃ o database
   - Ãnh xáº¡ vÃ o cÃ¢u chuyá»‡n Ä‘Ã£ táº¡o vÃ  sáº¯p táº¡o

2. **Giáº£ láº­p nhÃ¢n váº­t**
   - Chá»n má»™t nhÃ¢n váº­t Ä‘á»ƒ Ä‘iá»u khiá»ƒn
   - Äá»c cÃ¢u chuyá»‡n theo gÃ³c nhÃ¬n cá»§a nhÃ¢n váº­t Ä‘Ã³
   - Thá»© tá»± theo nÃ³n Ã¡nh sÃ¡ng thá»i gian (light cone chronology)

3. **Lá»±a chá»n tÆ°Æ¡ng tÃ¡c**
   - Táº¡i má»—i thá»i Ä‘iá»ƒm quan trá»ng, chá»n hÃ nh Ä‘á»™ng cho nhÃ¢n váº­t
   - 3 lá»±a chá»n Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng:
     - **A**: HÃ nh Ä‘á»™ng chÃ­nh
     - **B**: HÃ nh Ä‘á»™ng Ä‘á»‘i nghá»‹ch
     - **C**: Tá»« bá»/RÃºt lui
   
4. **AI Ä‘iá»u khiá»ƒn nhÃ¢n váº­t phá»¥**
   - NhÃ¢n váº­t khÃ´ng Ä‘Æ°á»£c Ä‘iá»u khiá»ƒn sáº½ cÃ³ GPT-4 quyáº¿t Ä‘á»‹nh
   - Dá»±a trÃªn tÃ­nh cÃ¡ch vÃ  thuá»™c tÃ­nh cá»§a nhÃ¢n váº­t
   
5. **Timeline riÃªng biá»‡t**
   - Má»—i nhÃ¢n váº­t cÃ³ tiáº¿n trÃ¬nh xá»­ lÃ½ riÃªng
   - Táº¥t cáº£ chia sáº» má»™t dÃ²ng thá»i gian chung
   - Äá»“ng bá»™ hÃ³a qua global time index

6. **Dá»± Ä‘oÃ¡n tÃ¬nh huá»‘ng**
   - GPT-4 dá»± Ä‘oÃ¡n tÃ¬nh huá»‘ng tiáº¿p theo
   - Dá»±a trÃªn cÃ¢u chuyá»‡n vÃ  quyáº¿t Ä‘á»‹nh cá»§a cÃ¡c nhÃ¢n váº­t
   - LiÃªn káº¿t logic giá»¯a cÃ¡c sá»± kiá»‡n

### VÃ­ dá»¥ Sá»­ dá»¥ng

```bash
# Set API key
export OPENAI_API_KEY='sk-...'

# Start simulation mode
python main.py -i simulation

# Follow the prompts to:
# 1. Select a world
# 2. Choose your character
# 3. Enable/disable auto-translation
# 4. Make decisions at key moments
# 5. Watch the story unfold
```

### Demo Simulation

```bash
# Run full demo (works without API key in limited mode)
python demo_gpt_simulation.py
```

## YÃªu cáº§u há»‡ thá»‘ng

- Python 3.7 trá»Ÿ lÃªn
- TinyDB >= 4.8.0 (cÃ i tá»± Ä‘á»™ng vá»›i pip install -r requirements.txt)
- OpenAI >= 1.0.0 (cho GPT-4 features)
- tkinter (thÆ°á»ng Ä‘i kÃ¨m vá»›i Python, cho GUI)
- **OpenAI API Key** (cho simulation mode vá»›i GPT-4)

## License

MIT License

## Author

AI-Nhat-Phuc
